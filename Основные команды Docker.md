2021-06-16 15:58
#tag
# Основные команды Docker
```powershell
docker comand --help			# справка по команде
docker -v 						# Версия Docker Engine

docker pull name_images			# скачать img 
docker images 					# Список локальных Images
docker search tomcat 			# Найти Image tomcat в DockerHub
docker build -t myimage:latest .# Создать Image с именем myimage:latest из локального Dockerfile
							"RUN (IMAGES)"
docker run name_images				# скачать и Запускает выбранный образ в NEW контейнере 
docker run -it -p 7777:8080 tomcat	# Запустить интерактивно NEW контейнер tomcat на порте 7777
docker run -d -p 80:80 nginx		# Запустить в фоне NEW контейнер nginx на порте 80
			-d			# запускает NEW контейнер в фоновом режиме;
			-t			# прикрепляет к контейнеру псевдо-TTY-консоль;
			-i			# выводит в терминал STDIN поток контейнера;
			--name		# имя контейнера, по которому потом можно будет к нему обращаться;
			--dns       # устанавливает DNS-серверы для контейнера;
			--network	# тип сети для контейнера, может принимать такие значения: **bridge** (используется по умолчанию), **none**, **host**. Также можно передать идентификатор сети Docker, к которой надо подключится;
			--add-host	# добавляет строчку в /etc/hosts;
			--restart	# указывает, когда надо перезапускать контейнер. Возможные значения: **no**, **on-failure**, **always**, **unless-stopped**;
			--rm		# удаляет контейнер после завершения его работы;
			-m, --memory# количество оперативной памяти, доступное Docker-контейнеру;
			--memory-swap	# объём памяти раздела подкачки, доступный в контейнере;
			--cpus			# количество ядер процессора, доступных в контейнере;
			--shm-size		# размер файла /dev/shm;
			--device		# позволяет монтировать устройства из папки /dev в контейнер;
			--entrypoint    # позволяет переопределить скрипт, который выполняется при запуске контейнера, перед запуском основной команды;
			--expose        # позволяет пробросить несколько портов из контейнера в хост-систему;
# docker port conteiter	# посмотреть № открытых портов 			
			-P			# пробрасывает все нужные порты контейнера в хост-систему(сделет их открытыми и случайными);
			-p			# переносит все порты контейнера в хост-систему без смены номера порта;
			--link		# позволяет настроить связь контейнеров Docker;
			-e      	# добавляет переменную окружения в контейнер;
			-v, --volume# позволяет монтировать папки хоста в контейнер;
			-w			# изменяет рабочую директорию контейнера.
						"PS \ Процессы(Conteiner)"
docker stop КОНТЕЙНЕР	# останавливает контейнер, передавая внутрь SIGTERM, а по истечении таймаута - SIGKILL    
docker start КОНТЕЙНЕР	# запускает остановленный контейнер.  
					-i	# (--interactive) аналогично docker run -i
docker restart КОНТЕЙНЕР#Перезапускает выбранный контейнер с помощью docker stop и docker start
docker kill КОНТЕЙНЕР	# Убивает контейнер, передавая внутрь SIGKILL
docker rm КОНТЕЙНЕР		# удаляет контейнер. По умолчанию можно удалить только запущенный контейнер.  
 					-f	# позволяет удалить запущенный контейнер. Используется передача SIGKILL внутрь.
docker diff				# отображает изменения относительно образа.
docker ps				# Список Бегущих контейнеров 'OR' docker ps -q
docket ps 	-a 			# Список ВСЕХ контейнеров
			-f	# фильтровать контейнеры при выводе;--filter,	
	  --format	# более красивый вывод списка контейнеров;
			-n	# показать только N последних созданных контейнеров;--last,		
			-l	# вывести только последний контейнер;--latest,	
	--no-trunc	# не обрезать вывод программы;	
			-q	# отображать только цифровые идентификаторы: ID контейнеров;--quiet,	
			-s	# отображать размер контейнера.--size,		
docker kill $(dc ps -q)	# Завершить все запущенные контейнера 
			
							"COPY"
# В любой момент образ можно экспортировать в единый файл и затем импортировать на другой машине. Для этого предусмотрены команды docker save и docker restore. Использовать их очень просто, экспорт выполняется так:
docker save -o ubuntu-nginx.img ubuntu-nginx 
docker load -i ubuntu-nginx.img	# импорт
docker tag oldname:v1 newname:v2# Создать копию Image с другим именем и тагом

'ЗАПУСК ТЕРМИНАЛА КОНТЕЙНЕРА'
# Запустить интерактивно /bin/bash на контейнере с ID 5267e21d140
docker exec -it 5267e21d140 /bin/bash 		 
echo "New Version v2" >> /var/www/html/index.html # Изменить файл в контейнере
exit										 # Выйти из контейнера
docker commit 5267e21d140 newimage_v2:latest # Создать Image с именем newimage_v2:latest из контейнера с ID 5267e21d140
```
_____________
#### Links
[[Docker]]