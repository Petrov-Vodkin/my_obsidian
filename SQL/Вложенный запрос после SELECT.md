2021-03-28 18:50
#tag
# Вложенный запрос после SELECT
Результат выполнения запроса выводится `в отдельном столбце` результирующей таблицы. При этом результатом запроса может быть `либо одно значение`, тогда оно будет `повторяться` во всех строках, либо `несколько значений`, количество которых `равно количеству отобранных записей в основном запросе`.
```sql
# Вывести информацию о книгах, количество экземпляров которых отличается от среднего количества экземпляров книг на складе более чем на 3,  а также указать среднее значение количества экземпляров книг.
SELECT title, author, amount, 
    (
     SELECT AVG(amount) 
     FROM book
    ) AS Среднее_количество 
FROM book
WHERE abs(amount - (SELECT AVG(amount) FROM book)) >3;
```
```sql
+-----------------------+------------------+--------+--------------------+
| title                 | author           | amount | Среднее_количество |
+-----------------------+------------------+--------+--------------------+
| Мастер и Маргарита    | Булгаков М.А.    | 3      | 7.6667             |
| Братья Карамазовы     | Достоевский Ф.М. | 3      | 7.6667             |
| Стихотворения и поэмы | Есенин С.А.      | 15     | 7.6667             |
+-----------------------+------------------+--------+--------------------+
```
_____________
#### Links
[[Вложенные запросы]]