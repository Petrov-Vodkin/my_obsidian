2021-02-02 14:23
#sql [stepik](https://stepik.org/lesson/297509/step/5?unit=279269 'тренажёр') [`Памятка/шпаргалка по SQL`](https://habr.com/ru/post/564390/ 'habr.com') | [microsoft](https://docs.microsoft.com/ru-RU/sql/t-sql/functions/date-and-time-data-types-and-functions-transact-sql?view=sql-server-2017)
# SQL
—язык структурированных запросов, позволяющий `хранить`, `изменять` и `извлекать` данные из реляционных баз данных.(Structured Query Language)

[Создавайте, визуализируйте и совместно работайте над диаграммами отношений сущностей вашей базы данных](https://drawsql.app/)

[[Шпаргалка_SQL]] основные запросы
[[Создание таблицы SQL]] `CREATE TABLE`
[[Связь таблиц]]
[[Соединение таблиц INNER JOIN]]
[[Соединение таблиц CROSS JOIN]]
[[Соединение, использование USING()]]
[[Корректировка данных]] 				`INSERT & UPDATE & CREATE & DELETE`
[[Три и более связанных таблицы]]

[[Объединения двух и более SQL запросов]] `UNION`

[[Логические функции SQL]] `IF(логическое_выражение,то выражение_1,else выражение_2)`
[[Математические функции SQL]] 
[[Работа с датами]]	`DATE`

[[Выборка данных таблицы SQL]] `WHERE` group `HAVING `
[[Выборка из нескольких таблиц SQL]]

[[Групповые запросы в SQL]]
[[Вложенные запросы]] (!!!)

[[Переменные]]
[[Alias SQL]]
[[String SQL]]

### [[PostgreSQL]] | [[sqlite3]]
```sql
# use USING if внешний ключ имеет такое же имя, как и соответствующий первичный ключ  
JOIN enrollee_subject USING(subject_id, enrollee_id)
'удалить связь таблиц (fkey)'
alter table имя_табл drop constraint имя_табл_имя_строки_fkey;
```
Сравнение с `NULL` => `переменная IS NULL` через `=` не юзать!!!!
```IFNULL(выражение, значение)``` 
После `GROUP BY` задаются ВСЕ столбцы (указанные после `SELECT`) к которым НЕ ПРИМЕНЯЮТСЯ групповые функции или выражения с групповыми функциями.
#### **Терминология реляционных баз данных:**
![[отношение_таблица.png]]
-   _**отношение**_  – это структура данных целиком, набор записей (в обычном понимании – таблица) , в  примере –это `**Сотрудник**`;
-   _**кортеж**_ – это каждая строка , содержащая данные (более распространенный термин – запись ), например, <00_1, Борин С.А, 234-01-23, программист_\>, все кортежи в отношении должны быть различны;
-   _**мощность**_ – число кортежей в таблице (проще говоря, число записей), в данном случае 3, мощность отношения может быть любой (от 0 до бесконечности), порядок следования кортежей - неважен;
-   _**атрибут**_ – это столбец в таблице (более распространенный термин – поле ), в примере – `**Табельный номер, Фамилия И.О., Телефон, Должность**`) 
-   _**размерность**_ – это число атрибутов в таблице, в данном случае – 4;
-   размерность отношения должна быть больше 0, порядок следования атрибутов существенен;
-    _**домен атрибута**_ – это допустимые значения (неповторяющиеся), которые можно занести в поле , например для атрибута `**Должность**` домен – {инженер, программист}.
#### _**Правила для выбора имен таблиц**_
-   может включать английские буквы, цифры и знак подчеркивания, должно начинаться с буквы;
-   имя должно быть уникальным в пределах базы данных.
-   чтобы имя было существительным в единственном числе;
-   имя должно быть понятным и соответствовать тому объекту, который оно описывает;
-   имя должно быть как можно короче, максимум до 10 символов;
-   использовать только строчные (маленькие) буквы.

**_Рекомендации по именованию  ключевых полей:_**
-   имя должно состоять  из двух частей: начинаться с названия таблицы, которой поле принадлежит,   затем через подчеркивание необходимо указать `**id.**`

#### Links
[Справочник mySQL](http://old.code.mu/sql/) 
[Тренажёр SQL](https://sql-academy.org/) + [7res](https://proglib.io/p/7-caytov-dlya-ottachivaniya-navyka-napisaniya-sql-zaprosov-na-2019-2020-g-2019-11-13)